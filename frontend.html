<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TutorGPT Chat</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f5f5f7;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .chat-container {
      width: 90%;
      max-width: 900px;
      height: 90vh;
      background: #fff;
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 15px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .header {
      padding: 15px 25px;
      font-size: 22px;
      font-weight: bold;
      color: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #e0e0e0;
    }

    .signature {
      font-size: 14px;
      font-weight: normal;
      color: #888;
    }

    .messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .message {
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 70%;
      word-wrap: break-word;
      white-space: pre-wrap;
      font-size: 15px;
      line-height: 1.5;
      box-shadow: 0 3px 6px rgba(0,0,0,0.05);
    }

    .message p { 
      margin: 0; 
      padding: 0; 
    }

    .user {
      background: #111;
      color: #fff;
      margin-left: auto;
      border-bottom-right-radius: 4px;
    }

    .assistant {
      background: #f0f0f5;
      color: #111;
      margin-right: auto;
      border-bottom-left-radius: 4px;
    }

    .typing {
      font-style: italic;
      opacity: 0.7;
    }

    .input-box {
      display: flex;
      border-top: 1px solid #e0e0e0;
      padding: 10px 15px;
      background: #fafafa;
      gap: 10px;
    }

    input {
      flex: 1;
      padding: 12px 15px;
      border-radius: 25px;
      border: 1px solid #ccc;
      font-size: 15px;
      outline: none;
      transition: border 0.2s;
    }

    input:focus {
      border-color: #888;
    }

    button {
      padding: 12px 20px;
      border: none;
      background: #111;
      color: #fff;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }

    button:hover {
      background: #333;
    }

    /* Footer links */
    .footer-links {
        position: fixed;
        bottom: 15px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .footer-links a {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 16px;
        text-decoration: none;
        color: inherit;
        transition: transform 0.2s;
    }

    .footer-links a:hover {
        transform: scale(1.05);
    }

    .footer-links a svg {
        width: 24px;
        height: 24px;
        display: block;
    }


    /* Code styling */
    .message pre {
      white-space: pre-wrap;
      word-break: break-word;
      background: #e8e8eb;
      padding: 10px;
      border-radius: 12px;
      overflow-x: auto;
      font-family: monospace;
      font-size: 14px;
    }

    .message code {
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="header">
      <span>Tutor AI</span>
      <span class="signature">~Kushagra Tarun</span>
    </div>

    <div class="messages" id="messages"></div>
    <div class="input-box">
      <input type="text" id="input" placeholder="Type your message...">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <!-- Footer with logos -->
  <div class="footer-links">
  <!-- LinkedIn -->
  <a href="https://www.linkedin.com/in/kushagra-tarun-1a809131b/" target="_blank">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#0073b1">
      <path d="M4.98 3.5C3.33 3.5 2 4.82 2 6.46c0 1.64 1.33 2.96 2.98 2.96 1.65 0 2.98-1.32 2.98-2.96C7.96 4.82 6.63 3.5 4.98 3.5zM2.4 8.9h5.17v12.6H2.4V8.9zm7.6 0h4.95v1.73h.07c.69-1.31 2.38-2.69 4.9-2.69 5.24 0 6.2 3.44 6.2 7.92v9.65h-5.17v-8.56c0-2.04-.04-4.66-2.84-4.66-2.84 0-3.28 2.22-3.28 4.5v8.72H10V8.9z"/>
    </svg>
    <span>LinkedIn</span>
  </a>

  <!-- GitHub -->
  <a href="https://github.com/kaiser-fx" target="_blank">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#333">
      <path d="M12 .5C5.73.5.5 5.73.5 12c0 5.09 3.29 9.41 7.86 10.94.57.1.78-.25.78-.56 0-.28-.01-1.02-.01-2-3.2.69-3.88-1.55-3.88-1.55
               -.52-1.33-1.27-1.68-1.27-1.68-1.04-.71.08-.69.08-.69 1.15.08 1.76 1.18 1.76 1.18 1.02 1.74 2.68 1.23 3.33.94
               .1-.73.4-1.23.73-1.51-2.56-.29-5.26-1.28-5.26-5.72 0-1.26.45-2.28 1.18-3.08-.12-.29-.51-1.46.11-3.05 0 0 .96-.31
               3.15 1.18a10.91 10.91 0 012.87-.39c.97.01 1.95.13 2.87.39 2.19-1.49 3.15-1.18 3.15-1.18.62 1.59.23 2.76.11 3.05
               .74.8 1.18 1.82 1.18 3.08 0 4.45-2.7 5.43-5.28 5.71.41.36.78 1.09.78 2.2 0 1.59-.01 2.88-.01 3.27 0 .31.21.67.79.56
               C20.71 21.41 24 17.09 24 12c0-6.27-5.23-11.5-12-11.5z"/>
    </svg>
    <span>GitHub</span>
  </a>
</div>



  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    const API_URL = "http://127.0.0.1:8000";
    const messagesDiv = document.getElementById("messages");
    let typingIndicator = null;

    function addMessage(text, role) {
      const msg = document.createElement("div");
      msg.className = "message " + role;
      msg.innerHTML = marked.parse(text);
      messagesDiv.appendChild(msg);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
      return msg;
    }

    function showTyping() {
      typingIndicator = addMessage("TutorGPT is typing...", "assistant typing");
    }

    function hideTyping() {
      if (typingIndicator) {
        typingIndicator.remove();
        typingIndicator = null;
      }
    }

    async function sendMessage() {
      const input = document.getElementById("input");
      const text = input.value.trim();
      if (!text) return;

      addMessage(text, "user");
      input.value = "";

      showTyping();

      const res = await fetch(`${API_URL}/chat`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: text })
      });

      const data = await res.json();
      hideTyping();
      addMessage(data.reply, "assistant");
    }

    document.getElementById("input").addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    window.onload = async () => {
      showTyping();
      const res = await fetch(`${API_URL}/start`);
      const data = await res.json();
      hideTyping();
      addMessage(data.reply, "assistant");
    };
  </script>
</body>
</html>
